let map,kmlLayer,autocomplete,user_location,moon_icon,coffee_icon,restaurant_icon,location_marker,destination_marker;function initMap(){map=new google.maps.Map(document.getElementById("map"),{mapId:"99e6d3506180ee33",center:{lat:14.83987,lng:-91.52158},zoom:10}),loadIcons();let o=[14.83664,-91.51912,14.83659,-91.51831,14.83656,-91.51744,14.84361,-91.52638],e=["Leyendas Café","Grano de Café","Cory_kay bakeshop","Cafetería Azarela"],n=0;for(let a=0;a<o.length;a++)add_coffee_marker(o[n],o[n+1],e[a]),n+=2;let a=[14.85067,-91.52647,14.84704,-91.5226],t=["Restaurante Don Carlos","Xelapan Los Altos"],i=0;for(let o=0;o<a.length;o++)add_restaurant_marker(a[i],a[i+1],t[o]),i+=2;new google.maps.KmlLayer({url:"https://raw.githubusercontent.com/bedhsk/document/main/moonmapv1.kml",map:map});initAutocomplete(),showLocation()}function add_restaurant_marker(o,e,n){const a=new google.maps.Marker({position:new google.maps.LatLng(o,e),map:map,icon:restaurant_icon}),t=new google.maps.InfoWindow({content:n});a.addListener("click",(()=>{t.open(map,a)}))}function add_coffee_marker(o,e,n){const a=new google.maps.Marker({position:new google.maps.LatLng(o,e),map:map,icon:coffee_icon}),t=new google.maps.InfoWindow({content:n});a.addListener("click",(()=>{t.open(map,a)}))}function loadIcons(){moon_icon={url:"https://cdn-icons-png.flaticon.com/512/4931/4931239.png",scaledSize:new google.maps.Size(50,50)},coffee_icon={url:"https://cdn-icons-png.flaticon.com/512/9246/9246639.png",scaledSize:new google.maps.Size(40,40)},restaurant_icon={url:"https://cdn-icons-png.flaticon.com/512/3207/3207949.png",scaledSize:new google.maps.Size(40,40)}}function initAutocomplete(){autocomplete=new google.maps.places.Autocomplete(place_input,{strictBounds:!1}),autocomplete.bindTo("bounds",map),autocomplete.addListener("place_changed",(()=>{const o=autocomplete.getPlace(),{geometry:e}=o,{viewport:n,location:a}=e;destination_marker?destination_marker.setPosition(a):destination_marker=new google.maps.Marker({position:a,map:map,icon:moon_icon}),map.setCenter(a),document.getElementById("place_input").value=""}))}function showLocation(){button.addEventListener("click",(()=>{navigator.geolocation?user_location=navigator.geolocation.getCurrentPosition((({coords:{latitude:o,longitude:e}})=>{const n={lat:o,lng:e};location_marker?(map.setCenter(n),location_marker.setPosition(n)):(location_marker=new google.maps.Marker({position:n,map:map,icon:moon_icon}),map.setCenter(n))}),(()=>{alert("Ocurrió un error")})):alert("Tu navegador no dispone de geolocalización")}))}window.initMap=initMap;